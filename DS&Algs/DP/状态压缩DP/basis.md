# 状态压缩DP

**状态压缩动态规划是动态规划的一种高级技巧，它使用二进制位来表示和存储状态，从而优化空间复杂度或处理复杂的状态转移。**
**这种技术特别适合解决需要记录一组元素状态(如选择/不选择)的问题。**

- **使用一个整数的二进制表示来编码一组布尔状态**
- **通过位运算高效地进行状态转移**
- **减少维度，优化空间复杂度**

**在状态压缩DP中 位运算是核心操作。**

- **检查第i位是否为1（即第i个元素是否被选中）**
    `is_set = (state >> (i - 1)) & 1`
- **将第i位设为1（选中第i个元素）**
    `new_state = state | (1 << (i - 1))`
- **将第i位设为0（取消选中第i个元素）**
    `new_state = state & ~(1 << (i - 1))`
- **翻转第i位的值**
    `new_state = state ^ (1 << (i - 1))`
- **获取状态中1的个数（选中的元素个数）**
    `count = bin(state).count('1')`
    `count = state.bit_count()  # 或者使用内置函数`

**枚举状态state的所有子集subset（包括空集）。**

```python
subset = state  # 从完整集合开始
while subset != 0:  # 当子集变为0时 枚举完成
    subset = (subset - 1) & state   # 每次将子集减1 再与原始状态做与操作
    # 这样可以确保生成的子集只包含原始集合中的元素
```
